<tal:block replace="nothing">
-*- coding: utf-8 -*-
## CMFPlacefulWorkflow
## Copyright (C)2005 Ingeniweb

## This program is free software; you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation; either version 2 of the License, or
## (at your option) any later version.

## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.

## You should have received a copy of the GNU General Public License
## along with this program; see the file COPYING. If not, write to the
## Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.

Override plone prefs_workflow_basic template for adding policy stuff

# $Source: /cvsroot/ingeniweb/CMFPlacefulWorkflow/skins/CMFPlacefulWorkflow/prefs_workflow_basic.pt,v $
# $Id$
</tal:block>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="cmfplacefulworkflow">

    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1)" />

    <body>

        <div metal:fill-slot="prefs_configlet_main"
             tal:define="workflow_list wtool/listWorkflows;">

            <div id="content" class="documentEditable"
                 tal:condition="python:checkPermission('Manage users', here)">

                <!-- ugly way of simulating real actions on placeful workflow pages until we have real objects. -->
                <ul class="contentViews">
                    <li class="selected">
                        <a href="prefs_workflow_basic"
                           i18n:translate="label_workflow_default">
                            Default workflow configuration
                        </a>
                    </li>
                    <li class="">
                        <a href="prefs_workflow_advanced"
                           i18n:translate="label_workflow_global_type_mapping">
                            Global Content Type to Workflow Mapping
                        </a>
                    </li>
                    <li class="">
                        <a href="prefs_workflow_localpolicies_form"
                           i18n:translate="label_workflow_local_type_mapping">
                            Local Content Type to Workflow Mapping
                        </a>
                    </li>
                </ul>

                <div class="contentActions">
                    &nbsp;
                </div>
                <!-- End of tabs -->

                <div id="region-content">

                    <a name="documentContent"></a>

                    <h1 i18n:translate="heading_workflow_setup">
                        Workflow Setup
                    </h1>

                    <a href=""
                       class="link-parent"
                       tal:attributes="href string: $portal_url/plone_control_panel"
                       i18n:domain="plone"
                       i18n:translate="label_up_to_plone_setup">
                        Up to Plone Setup
                    </a>
  
                    <p i18n:translate="description_workflow_setup">
                        Workflow setup for Plone.
                    </p>
  
                    <metal:block tal:condition="python:test(request.get('type_name', 'Select')!='Select', 1, 0)">
                        <tal:block tal:define="pps python:modules['Products.PythonScripts.standard'];
                                               type_name python:pps.url_quote(request.get('type_name'));" />
                    </metal:block>
  
                    <h1 i18n:translate="heading_select_workflow">
                        Select workflow
                    </h1>
  
                    <form name="change_default_workflow"
                          action="prefs_workflow_basic_edit"
                          method="post">
  
                        <p i18n:translate="description_workflow_common">
                            Workflows let you manage the publication process in
                            your site. Plone ships with 4 common workflows:
                        </p>
  
                        <input class="noborder"
                               type="radio"
                               name="default_workflow"
                               value="1"
                               id="onestep"
                               tal:attributes="tabindex tabindex;" />

                        <label for="one_step_workflow"
                               i18n:translate="label_one_step_workflow">
                            One step publication workflow
                        </label>
                        <br/>

                        <p i18n:translate="description_workflow_one_step">
                            If you want to have all the contents immediately
                            available for everyone, without having any review
                            process you should use this One step publication.
                        </p>

                        <span i18n:translate="label_workflow_default_state">
                            You can also change the starting state of all documents:
                        </span>

                        <select id="select_default_state" name="default_state">
  
                            <option value="current" i18n:translate="label_select">
                                Select
                            </option>

                            <metal:block tal:repeat="wf workflow_list">
                                <option value="wf"
                                        tal:attributes="value wf"
                                        tal:content="wf"
                                        i18n:translate="">
                                    public draft
                                </option>
                            </metal:block>
                        </select>
                        <br/>
  
                        <input class="noborder"
                               type="radio"
                               name="default_workflow"
                               value="2"
                               id="community"
                               tal:attributes="tabindex tabindex;" />
  
                        <label for="one_step_workflow"
                               i18n:translate="label_community_workflow">
                            Community workflow
                        </label>
                        <br />

                        <p i18n:translate="description_workflow_community">
                            If you want to have all the contents immediately
                            available for everyone, but you also want to have a
                            review process you should use this.
                        </p>

                        <span i18n:translate="label_workflow_default_state">
                            You can also change the starting state of all documents:
                        </span>

                        <select id="select_default_state" name="default_state">
  
                            <option value="current"
                                    i18n:domain="plone"
                                    i18n:translate="label_select">
                                Select
                            </option>

                            <metal:block tal:repeat="wf workflow_list">
                                <option value="wf"
                                        tal:attributes="value wf"
                                        tal:content="wf"
                                        i18n:translate="">
                                    public draft
                                </option>
                            </metal:block>
                        </select>
  
                        <div class="field">
                            <input class="context"
                                   type="submit"
                                   name="Change"
                                   value="Save"
                                   i18n:domain="plone"
                                   i18n:attributes="value label_save;"
                                   tal:attributes="tabindex tabindex/next;" />
                        </div>

                    </form>
                </div>
            </div>

            <div id="content"
                 class="documentEditable"
                 tal:condition="python:not checkPermission('Manage users', here)">
                <tal:block replace="here/raiseUnauthorized" />
            </div>

        </div>
    </body>
</html>
